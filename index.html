<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#16a34a" />
    <title>Beaux Sucres · Tier List ZEVENT</title>
    <meta name="description" content="Logiciel web PWA · Tier list interactive Beaux Sucres (ZEVENT) · Offline, export PNG, partage, undo/redo." />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%8D%AC%3C/text%3E%3C/svg%3E" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <nav class="nav">
        <div class="logo">
          <span class="mark" id="logoMark" aria-hidden="true">🍬</span>
          <span class="brand">Beaux Sucres · ZEVENT</span>
        </div>
        <div class="spacer"></div>
        <button class="btn small ghost" id="stageToggle" title="Mode scène (plein écran)">🎬 Scène</button>
        <button class="btn small ghost" id="zeventToggle" title="Activer le thème ZEVENT">🎨 ZEVENT</button>
        <button class="btn small ghost" id="themeToggle" title="Basculer clair/sombre">🌓 Thème</button>
        <button class="btn small ghost" id="streamToggle" title="Mode streamer">📺 Streamer</button>
        <button class="btn small" id="saveBtn" title="Sauver dans ce navigateur">💾 Sauver</button>
        <button class="btn small" id="resetBtn" title="Réinitialiser la grille">♻️ Reset</button>
        <button class="btn small" id="exportBtn" title="Exporter JSON">⬇️ Export</button>
        <button class="btn small" id="importBtn" title="Importer JSON">⬆️ Import</button>
        <input type="file" id="importFile" accept="application/json" hidden />
      </nav>
    </header>

    <main>
      <section class="hero">
        <div class="left card">
          <div class="pulse" aria-hidden="true"></div>
          <h1>Nejda fait un ZEVENT ✨</h1>
          <p>Bienvenue dans le <strong>logiciel web</strong> des <strong>Beaux Sucres</strong> : crée ta <em>tier list</em>, sauvegarde, partage, exporte en PNG — même <em>offline</em>.</p>
          <div class="bar" role="list">
            <span class="tag" role="listitem">Drag & drop</span>
            <span class="tag" role="listitem">Undo / Redo</span>
            <span class="tag" role="listitem">Export PNG</span>
            <span class="tag" role="listitem">PWA Offline</span>
            <span class="tag" role="listitem">Confetti S-tier 🎉</span>
          </div>
        </div>
        <div class="right card control-card">
          <div class="row" aria-label="Ajouter un sucre">
            <input id="nameInput" type="text" placeholder="Nom du sucre / pseudo" aria-label="Nom" />
            <input id="emojiInput" type="text" placeholder="Emoji (ex: 🍭)" aria-label="Emoji" />
            <input id="imgInput" type="url" placeholder="Image (URL, optionnel)" aria-label="Image (URL)" />
            <button id="addBtn" class="btn primary">+ Ajouter</button>
          </div>
          <div class="row between">
            <label class="muted">Astuce : double‑clique un sucre pour le renommer. 🖊️ pour changer l’emoji / image.</label>
            <div class="legend">
              <button class="btn small ghost" id="demoBtn" title="Réinjecter sucreries démo">Démo</button>
            </div>
          </div>
          <div class="row between">
            <input id="filterInput" type="text" placeholder="Filtrer la réserve (recherche)…" aria-label="Filtre" />
            <div class="stats" id="stats" aria-live="polite"></div>
          </div>
          <div class="row wrap">
            <button class="btn small ghost" id="shareBtn" title="Créer un lien partageable">🔗 Lien</button>
            <input id="shareField" type="text" readonly placeholder="Le lien apparaîtra ici" aria-label="Lien partageable" />
            <button class="btn small ghost" id="alphaSortBtn" title="Trier chaque rang A→Z">🔤 Trier A→Z</button>
            <button class="btn small ghost" id="undoBtn" title="Annuler (Ctrl+Z)">↶ Annuler</button>
            <button class="btn small ghost" id="redoBtn" title="Rétablir (Ctrl+Y)">↷ Rétablir</button>
            <button class="btn small" id="exportPngBtn" title="Exporter une capture PNG de la tier list">🖼️ Export PNG</button>
          </div>
        </div>
      </section>

      <section class="tierboard" id="board" aria-label="Grille de classement">
        <div class="tier-row" data-tier="S"><div class="badge" data-badge="S" aria-label="Compteur rang S">S</div><div class="dropzone" data-zone="S" aria-label="Rang S (légendaire)"></div></div>
        <div class="tier-row" data-tier="A"><div class="badge" data-badge="A" aria-label="Compteur rang A">A</div><div class="dropzone" data-zone="A" aria-label="Rang A"></div></div>
        <div class="tier-row" data-tier="B"><div class="badge" data-badge="B" aria-label="Compteur rang B">B</div><div class="dropzone" data-zone="B" aria-label="Rang B"></div></div>
        <div class="tier-row" data-tier="C"><div class="badge" data-badge="C" aria-label="Compteur rang C">C</div><div class="dropzone" data-zone="C" aria-label="Rang C"></div></div>
        <div class="tier-row" data-tier="D"><div class="badge" data-badge="D" aria-label="Compteur rang D">D</div><div class="dropzone" data-zone="D" aria-label="Rang D"></div></div>
      </section>

      <div class="pool-wrap">
        <h3 class="muted">🎒 Réserve — sucreries en attente</h3>
        <div class="pool dropzone" data-zone="pool" id="pool" aria-label="Réserve"></div>
      </div>
    </main>

    <footer class="site-footer">
      <div>Fait avec ❤️ pour la commu des Beaux Sucres • <span class="hash">#ZEVENT</span></div>
      <div>Design/Code : <strong>toi + moi</strong></div>
    </footer>

    <template id="chipTemplate">
      <div class="chip" draggable="true" tabindex="0" role="button" aria-grabbed="false">
        <span class="avatar" aria-hidden="true">🍬</span>
        <span class="label">Sucre</span>
        <button class="edit" title="Changer emoji" aria-label="Changer emoji">🖊️</button>
        <button class="del" title="Supprimer" aria-label="Supprimer">✖</button>
      </div>
    </template>

    <div id="toast" role="status" aria-live="polite" aria-atomic="true"></div>
    <canvas id="fx" class="fx"></canvas>

    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('sw.js').catch(()=>{});
        });
      }
    </script>
    <script src="app.js"></script>
    <noscript>Veuillez activer JavaScript pour utiliser l'application.</noscript>
  </body>
</html>
