<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Beaux Sucres ¬∑ Tier List ZEVENT</title>
  <meta name="description" content="Site vitrine + tier list interactive pour les Beaux Sucres ‚Äî sp√©cial ZEVENT" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%8D%AC%3C/text%3E%3C/svg%3E" />
  <style>
    :root {
      --bg: #0f0f14;
      --bg-2: #12121a;
      --glass: rgba(255,255,255,0.06);
      --txt: #f4f6fa;
      --muted: #a7acb7;
      --brand: #8b5cf6; /* violet */
      --brand-2: #22d3ee; /* cyan */
      --good: #10b981;
      --warn: #f59e0b;
      --danger: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    html,body{height:100%}
    *{box-sizing:border-box}
    body {
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(139,92,246,.25), transparent 60%),
                  radial-gradient(1200px 800px at 0% 100%, rgba(34,211,238,.18), transparent 60%),
                  linear-gradient(180deg, var(--bg), var(--bg-2));
      color: var(--txt);
      letter-spacing:.2px;
    }
    header {
      position: sticky; top:0; z-index: 10;
      backdrop-filter: saturate(140%) blur(8px);
      background: linear-gradient(180deg, rgba(15,15,20,.85), rgba(15,15,20,.35));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .nav {
      max-width: 1200px; margin:0 auto; display:flex; align-items:center; gap:16px; padding:14px 18px;
    }
    .logo {
      display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.4px;
    }
    .logo .mark { font-size: 24px; filter: drop-shadow(0 4px 10px rgba(139,92,246,.4)); }
    .logo .brand { font-size: 18px; }
    .nav .spacer { flex:1; }
    .btn { cursor:pointer; border:none; border-radius: 12px; padding:10px 14px; color:var(--txt); background: var(--glass); backdrop-filter: blur(6px);
           border: 1px solid rgba(255,255,255,.08); box-shadow: var(--shadow); transition: .2s transform ease, .2s background ease, .2s border-color ease, .2s box-shadow ease; }
    .btn:hover { transform: translateY(-2px); background: rgba(255,255,255,.09); }
    .btn.primary { background: linear-gradient(135deg, var(--brand), var(--brand-2)); border-color: transparent; }
    .btn.ghost { background: transparent; border-color: rgba(255,255,255,.12); }
    .btn.small { padding:8px 10px; border-radius: 10px; font-size: 13px; }

    .hero { max-width: 1200px; margin: 26px auto 8px; display:grid; grid-template-columns: 1.3fr 1fr; gap:22px; padding:0 18px; }
    .card { background: var(--glass); border: 1px solid rgba(255,255,255,.08); border-radius: var(--radius); box-shadow: var(--shadow); }
    .hero .left { padding:26px; position:relative; overflow:hidden; }
    .hero h1 { margin:0 0 6px; font-size: 40px; line-height:1.05; }
    .hero p { margin:0; color: var(--muted); }
    .hero .pulse {
      position:absolute; inset:-2px; border-radius: inherit; pointer-events:none;
      background: radial-gradient(600px 240px at 20% 0%, rgba(139,92,246,.15), transparent),
                  radial-gradient(600px 240px at 100% 100%, rgba(34,211,238,.14), transparent);
      mask: linear-gradient(#000 40%, transparent);
    }
    .hero .right { padding:20px; display:grid; gap:12px; align-content:start; }
    .bar { display:flex; gap:10px; flex-wrap:wrap; }
    .bar .tag { padding:8px 10px; border-radius:999px; background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.1); font-size:13px; }

    .controls { max-width: 1200px; margin: 6px auto 20px; padding: 0 18px; display:grid; grid-template-columns: 1fr 1fr; gap:18px; }
    .control-card { padding:16px; display:grid; gap:12px; }
    .row { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .row input[type="text"], .row input[type="url"] { flex:1; min-width: 120px; padding: 10px 12px; border-radius: 12px; border:1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.04); color:var(--txt); }
    .row label { font-size: 13px; color: var(--muted); }

    .tierboard { max-width: 1200px; margin: 0 auto; padding: 0 18px 22px; display:grid; gap:10px; }
    .tier-row { display:grid; grid-template-columns: 72px 1fr; gap:10px; align-items:stretch; }
    .badge { display:flex; align-items:center; justify-content:center; font-weight:800; font-size:22px; border-radius: 14px; letter-spacing:.8px; background: linear-gradient(135deg, rgba(255,255,255,.14), rgba(255,255,255,.04)); border:1px solid rgba(255,255,255,.14); }
    .dropzone { min-height: 84px; display:flex; gap:10px; flex-wrap:wrap; align-content:flex-start; padding:10px; border-radius: 14px; border:1px dashed rgba(255,255,255,.18); background: rgba(255,255,255,.04); }

    /* tier colors */
    .tier-row[data-tier="S"] .badge { background: linear-gradient(135deg, #f87171, #fb923c); }
    .tier-row[data-tier="A"] .badge { background: linear-gradient(135deg, #fb923c, #fbbf24); }
    .tier-row[data-tier="B"] .badge { background: linear-gradient(135deg, #fbbf24, #34d399); }
    .tier-row[data-tier="C"] .badge { background: linear-gradient(135deg, #34d399, #22d3ee); }
    .tier-row[data-tier="D"] .badge { background: linear-gradient(135deg, #22d3ee, #8b5cf6); }

    .pool-wrap { max-width: 1200px; margin: 0 auto 40px; padding: 0 18px; }
    .pool { display:flex; gap:10px; flex-wrap:wrap; padding: 12px; border-radius: 14px; border:1px dashed rgba(255,255,255,.18); background: rgba(255,255,255,.04); min-height: 84px; }

    .chip { --chip-bg: rgba(255,255,255,.06); display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius: 999px; border:1px solid rgba(255,255,255,.14); background: var(--chip-bg); cursor:grab; user-select:none; box-shadow: 0 6px 14px rgba(0,0,0,.25); transition: .15s transform ease, .15s box-shadow ease; }
    .chip:active { cursor:grabbing; transform: translateY(1px) scale(.99); }
    .chip .avatar { font-size: 18px; }
    .chip .label { font-weight: 600; letter-spacing:.2px; }
    .chip .del, .chip .edit { background: transparent; border: none; color: var(--muted); cursor:pointer; font-size:16px; padding: 0 4px; }
    .chip .del:hover { color: #ff6b6b; }
    .chip .edit:hover { color: #c6d0fb; }
    .chip .handle { display:none }
    .chip.dragging { opacity: .6; box-shadow: 0 4px 18px rgba(139,92,246,.35); }

    .legend { display:flex; gap:8px; flex-wrap:wrap; }
    .legend .dot { width:8px; height:8px; border-radius:50%; background: currentColor; margin-right:6px; }

    footer { max-width: 1200px; margin: 32px auto 60px; padding:0 18px; color:var(--muted); display:flex; justify-content:space-between; align-items:center; gap:12px }
    footer a { color: var(--txt); text-decoration: none; border-bottom:1px solid rgba(255,255,255,.18); }

    /* Streamer mode */
    .streamer body { font-size: 20px; }
    .streamer .chip { padding:12px 14px; font-size: 22px; }
    .streamer .badge { font-size: 28px; }

    /* Responsive */
    @media (max-width: 980px){
      .hero { grid-template-columns: 1fr; }
      .controls { grid-template-columns: 1fr; }
      .tier-row { grid-template-columns: 56px 1fr; }
      .hero h1 { font-size: 32px; }
    }
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <div class="logo">
        <div class="mark">üç¨</div>
        <div class="brand">Beaux Sucres ¬∑ ZEVENT</div>
      </div>
      <div class="spacer"></div>
      <button class="btn small ghost" id="themeToggle" title="Basculer clair/sombre">üåì Th√®me</button>
      <button class="btn small ghost" id="streamToggle" title="Mode streamer (grand texte)">üì∫ Streamer</button>
      <button class="btn small" id="saveBtn" title="Sauver dans ce navigateur">üíæ Sauver</button>
      <button class="btn small" id="resetBtn" title="R√©initialiser la grille">‚ôªÔ∏è Reset</button>
      <button class="btn small" id="exportBtn" title="Exporter JSON">‚¨áÔ∏è Export</button>
      <button class="btn small" id="importBtn" title="Importer JSON">‚¨ÜÔ∏è Import</button>
      <input type="file" id="importFile" accept="application/json" hidden />
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="left card">
        <div class="pulse"></div>
        <h1>Nejda fait un ZEVENT ‚ú®</h1>
        <p>Bienvenue sur le site des <strong>Beaux Sucres</strong> ! Construisez la <em>tier list</em> ultime en direct : ajoutez des sucreries (ou des pseudos), puis glissez-d√©posez dans les rangs S ‚Üí D.</p>
        <div style="height:14px"></div>
        <div class="bar">
          <span class="tag">Drag & drop</span>
          <span class="tag">Sauvegarde locale</span>
          <span class="tag">Export/Import JSON</span>
          <span class="tag">Mode Stream</span>
          <span class="tag">Confetti S-tier üéâ</span>
        </div>
      </div>
      <div class="right card control-card">
        <div class="row" aria-label="Ajouter un sucre">
          <input id="nameInput" type="text" placeholder="Nom du sucre / pseudo" />
          <input id="emojiInput" type="text" placeholder="Emoji (ex: üç≠)" style="max-width:120px" />
          <input id="imgInput" type="url" placeholder="Image (URL, optionnel)" />
          <button id="addBtn" class="btn primary">+ Ajouter</button>
        </div>
        <div class="row" style="justify-content:space-between">
          <label>Astuce : double‚Äëcliquez un sucre pour le renommer. Cliquez üñäÔ∏è pour changer l'emoji.</label>
          <div class="legend">
            <span class="tag" title="R√©initialise les sucreries d√©mo">D√©mo pr√©remplie</span>
          </div>
        </div>
      </div>
    </section>

    <section class="controls">
      <div class="card control-card">
        <strong>√Ä propos</strong>
        <p style="color:var(--muted); margin:0">Un petit site fan‚Äëmade pour c√©l√©brer <em>ZEVENT</em> avec la communaut√© de Nejda. Tout est c√¥t√© client ‚Äî aucune donn√©e envoy√©e ailleurs. ‚úåÔ∏è</p>
        <div class="row" style="gap:12px">
          <button class="btn ghost small" id="shareBtn" title="Lien partageable">üîó Lien partageable</button>
          <input id="shareField" type="text" readonly placeholder="Votre lien appara√Ætra ici" />
        </div>
      </div>
      <div class="card control-card">
        <strong>Raccourcis</strong>
        <p style="color:var(--muted); margin:0">S√©lectionnez un sucre puis utilisez <code>1..5</code> pour l'envoyer vers S, A, B, C, D. <code>Suppr</code> pour supprimer.</p>
        <div class="row">
          <button class="btn small" id="demoBtn">R√©‚Äëinjecter la d√©mo</button>
        </div>
      </div>
    </section>

    <section class="tierboard" id="board" aria-label="Grille de classement">
      <div class="tier-row" data-tier="S">
        <div class="badge" aria-hidden="true">S</div>
        <div class="dropzone" data-zone="S" aria-label="Rang S (l√©gendaire)"></div>
      </div>
      <div class="tier-row" data-tier="A">
        <div class="badge" aria-hidden="true">A</div>
        <div class="dropzone" data-zone="A" aria-label="Rang A"></div>
      </div>
      <div class="tier-row" data-tier="B">
        <div class="badge" aria-hidden="true">B</div>
        <div class="dropzone" data-zone="B" aria-label="Rang B"></div>
      </div>
      <div class="tier-row" data-tier="C">
        <div class="badge" aria-hidden="true">C</div>
        <div class="dropzone" data-zone="C" aria-label="Rang C"></div>
      </div>
      <div class="tier-row" data-tier="D">
        <div class="badge" aria-hidden="true">D</div>
        <div class="dropzone" data-zone="D" aria-label="Rang D"></div>
      </div>
    </section>

    <div class="pool-wrap">
      <h3 style="margin: 0 0 8px; font-size: 16px; color: var(--muted);">üéí R√©serve ‚Äî sucreries en attente</h3>
      <div class="pool dropzone" data-zone="pool" id="pool" aria-label="R√©serve"></div>
    </div>
  </main>

  <footer>
    <div>Fait avec ‚ù§Ô∏è pour la commu des Beaux Sucres ‚Ä¢ <span style="color:#fff">#ZEVENT</span></div>
    <div>Design/Code: <strong>toi + moi</strong> ¬∑ <a href="#" id="downloadPNG" title="(optionnel) capture via la touche Impr. √©cran üòÑ">Capture?</a></div>
  </footer>

  <!-- Template pour un sucre -->
  <template id="chipTemplate">
    <div class="chip" draggable="true" tabindex="0" role="button" aria-grabbed="false">
      <span class="avatar" aria-hidden="true">üç¨</span>
      <span class="label">Sucre</span>
      <button class="edit" title="Changer emoji" aria-label="Changer emoji">üñäÔ∏è</button>
      <button class="del" title="Supprimer" aria-label="Supprimer">‚úñ</button>
    </div>
  </template>

  <canvas id="fx" style="position:fixed; inset:0; pointer-events:none"></canvas>

  <script>
  (function(){
    const stateKey = 'beaux-sucres-tier-state-v1';
    const themeKey = 'beaux-sucres-theme';

    const boardEl = document.getElementById('board');
    const poolEl = document.getElementById('pool');

    const nameInput = document.getElementById('nameInput');
    const emojiInput = document.getElementById('emojiInput');
    const imgInput = document.getElementById('imgInput');
    const addBtn = document.getElementById('addBtn');

    const saveBtn = document.getElementById('saveBtn');
    const resetBtn = document.getElementById('resetBtn');
    const exportBtn = document.getElementById('exportBtn');
    const importBtn = document.getElementById('importBtn');
    const importFile = document.getElementById('importFile');
    const shareBtn = document.getElementById('shareBtn');
    const shareField = document.getElementById('shareField');
    const demoBtn = document.getElementById('demoBtn');

    const themeToggle = document.getElementById('themeToggle');
    const streamToggle = document.getElementById('streamToggle');

    const chipTpl = document.getElementById('chipTemplate');

    const dropzones = Array.from(document.querySelectorAll('.dropzone'));

    const S = { tiers: { S:[], A:[], B:[], C:[], D:[] }, pool:[] };

    function uid(){ return (crypto?.randomUUID?.() || Math.random().toString(36).slice(2)) }

    function demoData(){
      return {
        tiers: { S:[], A:[], B:[], C:[], D:[] },
        pool: [
          {id:uid(), name:'Nejda', emoji:'ü™Ñ'},
          {id:uid(), name:'Beau Sucre', emoji:'üç¨'},
          {id:uid(), name:'Croissant', emoji:'ü•ê'},
          {id:uid(), name:'Caf√©', emoji:'‚òï'},
          {id:uid(), name:'Chat', emoji:'üêà'},
          {id:uid(), name:'Cr√®me br√ªl√©e', emoji:'üçÆ'},
          {id:uid(), name:'Team', emoji:'ü§ù'},
          {id:uid(), name:'Z Event', emoji:'üíö'}
        ]
      }
    }

    function load(){
      // From URL hash (share)
      try{
        const hash = new URL(location.href).hash;
        if(hash.startsWith('#s=')){
          const json = decodeURIComponent(atob(hash.slice(3)));
          const obj = JSON.parse(json);
          Object.assign(S, obj);
          history.replaceState(null, '', location.pathname + location.search);
          return;
        }
      }catch(e){ console.warn('Hash import failed', e) }

      const raw = localStorage.getItem(stateKey);
      if(raw){
        try{ Object.assign(S, JSON.parse(raw)); }
        catch(e){ console.warn('Bad state, using demo', e); Object.assign(S, demoData()); }
      } else {
        Object.assign(S, demoData());
      }
    }

    function save(){ localStorage.setItem(stateKey, JSON.stringify(S)); }

    function clearEl(el){ while(el.firstChild) el.removeChild(el.firstChild); }

    function createChip(item){
      const el = chipTpl.content.firstElementChild.cloneNode(true);
      el.dataset.id = item.id;
      el.querySelector('.label').textContent = item.name;
      const avatar = el.querySelector('.avatar');
      if(item.img){
        avatar.textContent = '';
        const img = document.createElement('img');
        img.src = item.img; img.alt = item.emoji || 'üç¨';
        img.width = 20; img.height = 20; img.style.borderRadius='50%'; img.style.display='block';
        avatar.appendChild(img);
      } else {
        avatar.textContent = item.emoji || 'üç¨';
      }

      el.addEventListener('dblclick', () => {
        const newName = prompt('Nouveau nom ?', item.name);
        if(newName){ item.name = newName.trim(); render(); save(); }
      });

      el.querySelector('.edit').addEventListener('click', (ev)=>{
        ev.stopPropagation();
        const newEmoji = prompt('Nouvel emoji (ou URL d\'image) ?', item.emoji || '');
        if(!newEmoji) return;
        if(/^https?:\/\//.test(newEmoji)) { item.img = newEmoji; item.emoji = ''; }
        else { item.emoji = newEmoji; item.img = ''; }
        render(); save();
      });

      el.querySelector('.del').addEventListener('click', (ev)=>{
        ev.stopPropagation();
        removeItem(item.id);
      });

      el.draggable = true;
      el.addEventListener('dragstart', (e)=>{
        e.dataTransfer.setData('text/plain', item.id);
        requestAnimationFrame(()=> el.classList.add('dragging'));
      });
      el.addEventListener('dragend', ()=> el.classList.remove('dragging'));

      el.addEventListener('keydown', (e)=>{
        const map = { '1':'S', '2':'A', '3':'B', '4':'C', '5':'D' };
        if(map[e.key]){ moveTo(item.id, map[e.key]); }
        if(e.key==='Delete'){ removeItem(item.id); }
      });

      return el;
    }

    function allLists(){ return [S.pool, S.tiers.S, S.tiers.A, S.tiers.B, S.tiers.C, S.tiers.D]; }

    function findItem(id){
      for(const list of allLists()){
        const i = list.findIndex(x=>x.id===id);
        if(i>=0) return { list, index:i, item:list[i] };
      }
      return null;
    }

    function removeItem(id){
      const f = findItem(id); if(!f) return;
      f.list.splice(f.index,1); render(); save();
    }

    function moveTo(id, zone){
      const f = findItem(id); if(!f) return;
      f.list.splice(f.index,1);
      if(zone==='pool') S.pool.push(f.item);
      else S.tiers[zone].push(f.item);
      render(); save();
      if(zone==='S') confetti();
    }

    function render(){
      // zones
      for(const z of dropzones){ clearEl(z); }
      for(const it of S.pool){ poolEl.appendChild(createChip(it)); }
      for(const k of ['S','A','B','C','D']){
        const zone = document.querySelector(`.dropzone[data-zone="${k}"]`);
        for(const it of S.tiers[k]) zone.appendChild(createChip(it));
      }
    }

    // Drag & drop handling
    for(const zone of dropzones){
      zone.addEventListener('dragover', (e)=>{ e.preventDefault(); });
      zone.addEventListener('drop', (e)=>{
        e.preventDefault();
        const id = e.dataTransfer.getData('text/plain');
        const target = zone.dataset.zone;
        moveTo(id, target);
      });
    }

    // UI actions
    addBtn.addEventListener('click', ()=>{
      const name = nameInput.value.trim();
      const emoji = emojiInput.value.trim();
      const img = imgInput.value.trim();
      if(!name) return alert('Donne un petit nom √† ton sucre ‚ú®');
      const item = { id:uid(), name, emoji: emoji || 'üç¨', img: /^https?:\/\//.test(img) ? img : '' };
      S.pool.push(item); render(); save();
      nameInput.value = ''; emojiInput.value = ''; imgInput.value = '';
      nameInput.focus();
    });

    saveBtn.addEventListener('click', ()=>{ save(); flash(saveBtn); });
    resetBtn.addEventListener('click', ()=>{
      if(confirm('R√©initialiser la grille et la r√©serve ?')){ Object.assign(S, demoData()); render(); save(); }
    });

    exportBtn.addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(S,null,2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'beaux-sucres-tier.json';
      a.click();
      URL.revokeObjectURL(a.href);
    });

    importBtn.addEventListener('click', ()=> importFile.click());
    importFile.addEventListener('change', async (e)=>{
      const file = e.target.files[0]; if(!file) return;
      const text = await file.text();
      try{ const obj = JSON.parse(text); Object.assign(S, obj); render(); save(); }
      catch(err){ alert('Fichier invalide : ' + err.message); }
      finally { importFile.value = '' }
    });

    shareBtn.addEventListener('click', ()=>{
      try{
        const json = JSON.stringify(S);
        const hash = '#s=' + btoa(encodeURIComponent(json));
        const url = location.origin + location.pathname + hash;
        shareField.value = url; shareField.select(); document.execCommand('copy');
        flash(shareBtn, 'Copi√© !');
      }catch(e){ alert('Impossible de g√©n√©rer le lien : ' + e.message) }
    });

    themeToggle.addEventListener('click', ()=>{
      const cur = document.documentElement.dataset.theme || 'dark';
      const next = cur==='dark' ? 'light' : 'dark';
      applyTheme(next);
    });

    streamToggle.addEventListener('click', ()=>{
      document.documentElement.classList.toggle('streamer');
    });

    function applyTheme(mode){
      document.documentElement.dataset.theme = mode;
      localStorage.setItem(themeKey, mode);
      if(mode==='light'){
        document.body.style.background = 'linear-gradient(180deg, #fafafa, #efeff4)';
        document.body.style.color = '#0b0c10';
      } else {
        document.body.style.background = '';
        document.body.style.color = '';
      }
    }

    function flash(btn, txt){
      const old = btn.textContent; if(txt) btn.textContent = txt;
      btn.style.transform='scale(1.05)';
      setTimeout(()=>{ btn.style.transform=''; if(txt){ btn.textContent = old; } }, 600);
    }

    // Confetti (mini)
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    let confs = [];
    function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    window.addEventListener('resize', resize); resize();

    function confetti(){
      const N = 90;
      for(let i=0;i<N;i++){
        confs.push({ x: Math.random()*canvas.width, y: -20, vy: 2+Math.random()*3, vx: -2+Math.random()*4, s: 4+Math.random()*4, r: Math.random()*Math.PI, vr: (-.2+Math.random()*.4) });
      }
    }
    function tick(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.globalAlpha = .9;
      for(const c of confs){
        c.x += c.vx; c.y += c.vy; c.r += c.vr; c.vy += 0.03;
        ctx.save();
        ctx.translate(c.x,c.y); ctx.rotate(c.r);
        ctx.fillStyle = `hsl(${(c.x+c.y)%360}, 80%, 60%)`;
        ctx.fillRect(-c.s/2,-c.s/2,c.s,c.s);
        ctx.restore();
      }
      confs = confs.filter(c=> c.y < canvas.height+40);
      requestAnimationFrame(tick);
    }
    tick();

    // Init
    load();
    render();
    applyTheme(localStorage.getItem(themeKey)||'dark');

    // Demo button
    demoBtn.addEventListener('click', ()=>{ Object.assign(S, demoData()); render(); save(); });

  })();
  </script>
</body>
</html>
